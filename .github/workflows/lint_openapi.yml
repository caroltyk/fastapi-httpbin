name: Lint and Test OpenAPI document

on:
   workflow_dispatch:

jobs:
   lint:
      runs-on: ubuntu-latest
      steps:
      - 
         name: Checkout
         uses: actions/checkout@v4
      - 
         name: Setup node
         uses: actions/setup-node@v3
         with:
            node-version: 20.10.0
            cache: 'npm'
      - 
         name: Install Spectral
         run: npm install -g @stoplight/spectral-cli
      - 
         name: Lint API Definition
         run: spectral lint openapi.json --ruleset .spectral.yaml