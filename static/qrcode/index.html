<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dead Simple QR Code Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

<meta property="og:title" content="Dead Simple QR Code Generator">
<meta property="og:site_name" content="Dead Simple QR Code Generator">
<meta property="og:url" content="http://httpbin.dmuth.org/qrcode/">
<meta property="og:description" content="No ads. No signups. No spam.  Just QR Codes when you want them.">
<meta property="og:type" content="article">
<meta property="og:image" content="https://httpbin.dmuth.org/qrcode/logo-low-res.png">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@dmuth">
<meta name="twitter:title" content="Dead Simple QR Code Generator">
<meta name="twitter:description" content="No ads. No signups. No spam.  Just QR Codes when you want them.">
<meta name="twitter:image" content="https://httpbin.dmuth.org/qrcode/logo-low-res.png">

    <style>
    .range {
        width: 90%;
    }

    .output {
        padding-left: 10px;
    }

    </style>

  </head>
  <body>

  <!-- I got this sample from https://getbootstrap.com/docs/5.2/examples/navbars/ -->
  <nav class="navbar navbar-expand-md navbar-dark bg-dark" aria-label="Fourth navbar example">
    <div class="container-fluid">

      <a class="navbar-brand" href="/">FastAPI Httpbin</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExample04">
        <ul class="navbar-nav me-auto mb-2 mb-md-0">
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/roadmap/">Roadmap</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="/qrcode/">QR Code Generator</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/dmuth/fastapi-httpbin"
                ><span class="bi bi-github"></span> Source Code</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/dmuth/fastapi-httpbin/issues"
                ><span class="bi bi-chat-text"></span> Report an Issue</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>


<div class="container">

<div class="row">
<div class="col-md-12">

<p/>

<h1>Dead Simple QR Code Generator</h1>

<p><p/>

<p>
No ads.  No signups.  No spam.
<p/>

Just QR Codes when you want them.

</div><!-- /col -->
</div><!-- /row -->
<p/>

<div class="row">
<div class="col-md-6">

<form method="post" id="form1" action="/qrcode/form" novalidate>
  <div class="mb-3">
    <label for="url" class="form-label">URL:</label>
    <input type="text" class="form-control" name="url" id="url" aria-describedby="urlHelp"
        value="https://www.youtube.com/watch?v=nCEemcXzERk" required>
    <div class="invalid-feedback">
    URL is required and cannot be over 1,000 characters.
    </div>
    <div id="urlHelp" class="form-text">URL that you'd like to turn into a QR Code. 1000 char max.</div>
  </div>

  <div class="mb-3">
    <label for="box_size" class="form-label">Box Size:</label><br/>
    <input type="range" name="box_size" id="box_size" class="range" aria-describedby="box_sizeHelp"
            value="10" min="1" max="20" oninput="this.nextElementSibling.value = this.value">
    <output class="output">10</output>
    <div id="box_sizeHelp" class="form-text">How big should the QR Code be?  (Max: 20)</div>
  </div>

  <div class="mb-3">
    <label for="border" class="form-label">Border:</label><br/>
    <input type="range" name="border" id="border" class="range" aria-describedby="borderHelp"
            value="2" min="1" max="20" oninput="this.nextElementSibling.value = this.value">
    <output class="output">2</output>
    <div id="borderHelp" class="form-text">How much space around the QR code? (Max: 20)</div>
  </div>

  <button type="submit" class="btn btn-primary">Generate QR Code</button>

</form>

</div><!-- /col -->
</div><!-- /row -->

<div class="row mt-3">
<div class="col-md-6" id="result">

<div id="result_text" class="mt-2 mb-2">
The Generated QR Code will go here.
</div>

<div id="result_qr_code_text" style="display: none; " class="mt-2">
<p>
Your QR code is below.  If you are on a desktop or laptop, right click and choose "copy" or "save as".  If you are on mobile, try holding down on the image and choose "copy" or "save".
</p>

<img id="result_qr_code" />
</div>

</div><!-- /col -->
</div><!-- /row -->

<div class="row mt-3">
<div class="col-md-10" id="faq">

<h2>FAQ: Why did you write this?</h2>

<p>
I use QR codes regularly and was frustrated by the number of websites with
QR Code generators that are full of ads, tracking, tiny images, or a requirement that you sign up.  
QR Codes are fantastically useful and generating them should be free.
</p>

<p>
That's why I built this.  So every person can have QR codes 24/7.  QR codes for days.  QR codes for 100 years.
<p/>

<h2>FAQ: Where can I learn more about this or who wrote this?</h2>

<p>
Check the <a href="/about">about page</a>.
</p>

<h2>FAQ: How can I help?</h2>

<p>
I'm not the best when it comes to UIs and Javascript.  If you have ideas on how
I can make this app better, <a href="https://github.com/dmuth/fastapi-httpbin/issues">please open an issue on GitHub</a>. :-)
</p>

<p>
If you wish to support my efforts financially, please consider 
<a href="https://github.com/sponsors/dmuth">sponsoring me on GitHub</a>.  Monthly tiers start as low as $1!
</p>

<p>
If you just want to show support, please consider
<a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20free%20QR%20Code%20generator,%20made%20by%20@dmuth!%0A%0Ahttps://httpbin.dmuth.org/qrcode/%0A" 
    >sharing this app with a Tweet</a>.

</p>


</div><!-- /col -->
</div><!-- /row -->

</div><!-- /container -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
<script>
(function () {
  'use strict'

    let form = document.getElementById("form1");
    let url = document.getElementById("url");
    let box_size = document.getElementById("box_size");
    let border = document.getElementById("border");
    let action = form.action;
    let result = document.getElementById("result");
    let result_text = document.getElementById("result_text");
    let result_qr_code_text = document.getElementById("result_qr_code_text");
    let result_qr_code = document.getElementById("result_qr_code");


    form.addEventListener("submit", function(event) {

        let url_value = url.value;
        let url_length = url_value.length;
        let box_size_value = box_size.value;
        let border_value = border.value;

        //
        // Don't actually submit the form.
        //
        event.preventDefault()
        event.stopPropagation()

        if (!url_value || url_length > 1000) {
            url.classList.add("is-invalid");
            return(false);
        }

        //
        // If we got here, we're good to go.
        //
        url.classList.remove("is-invalid");

        action = "/qrcode/json"
        //action = "/post" // Debugging

        let data = {
            "url": url_value,
            "box_size": box_size_value,
            "border": border_value
            }
        //console.log("DATA", data); // Debugging

        let request = new Request(action, {
            "method": "POST",
            "headers": {
                "Content-Type": "application/json"
            },
            "body": JSON.stringify(data),
        });
        //console.log("REQUEST", request); // Debugging

        //
        // Hit our API, and display an image if we get one, or an error othereise.
        //
        fetch(request)
            .then(function(response) {
                if (!response.ok) {
                    return(Promise.reject(
                        `fetch() from '${action}' returned status ${response.status}`))
                }
                return(response.blob());

            }).then(function(blob) {
                let url = URL.createObjectURL(blob);
                result_qr_code.src = url;
                result_text.style.display = "none";
                result_qr_code_text.style.display = "block";
                return(blob.text());

            }).then(function(text) {
                //console.log(text); // Debugging
                //result.innerHTML = `<pre>${text}</pre>`; // Debugging

            }).catch(function(error) {
                result.innerHTML = `CAUGHT ERROR: ${error}`;

            });


    });


})()
</script>


  </body>
</html>
